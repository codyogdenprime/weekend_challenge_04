function imageExists(a,b){var c=new Image;c.onload=function(){b(!0)},c.onerror=function(){b(!1)},c.src=a}console.log("00_image_exists.js sourced"),console.log("01_show_image.js sourced");var showIfImage=function(a,b){var c=$(b);console.log("Input id",c.data());var d=new Image;d.onload=function(){$("<li />")},d.onerror=function(){console.log("Is not image")},d.src=a};console.log("02_genList.js sourced");var genList=function(a){for(var b=$(),c=0;c<a.length;c++){var d=$("<div />",{class:"list",data:a[c]}),e=$("<div />",{class:"list-title"}),f=$("<input />",{class:"list-title-input",data:a[c]}).attr("type","text").val(a[c].name),g=$("<button />",{class:"list-menu"}).html("..."),h=$("<ul />").attr("id",a[c].id),i=genItem(a[c].items),j=$("<div />",{class:"list-new-item"}),k=$("<input />",{class:"new-item-input",data:a[c]}).attr("placeholder","Add new item...");e.append([f,g]),d.append(e),h.append(i),d.append(h),j.append(k),d.append(j),b=b.add(d)}b.insertBefore(".add-list")},genItem=function(a){var b=[];if(a)for(var c=0;c<a.length;c++){var d=a[c],e=$("<li />");console.log("item status",d.status),d.status,d.complete&&e.addClass("item-complete");var f=$("<input />",{class:"item-input",data:d}).attr("type","text").val(d.content).attr("disabled","true");e.append(f),b.push(e)}return b};console.log("01_add_item.js sourced");var addList=function(){var a=$(".input-new-list");return""!==a.val()&&void $.ajax({url:"/list",type:"POST",dataType:"json",data:{name:a.val()},success:function(b){console.log("List Added",b),a.val(""),a.blur(),genList(b)}})},editList=function(){console.log("This data:",$(this).data());var a=$(this).data("id"),b=String("/list/"+a);$.ajax({url:b,type:"PUT",dataType:"json",data:{name:$(this).val()},success:function(a){console.log("Edited list!",a)}})},addItem=function(){console.log("Add Item:",$(this));var a=$(this);console.log("List ID:",$(this).data("id"));var b=a.data("id");console.log("URL","/list/"+b+"/items"),$.ajax({url:"/list/"+b+"/items",type:"POST",dataType:"json",data:{content:$(this).val()},success:function(c){console.log("Added Item!",c),a.val(""),$("#"+b).append(genItem(c)),refreshList(b)}})},editItem=function(){console.log("edit item",$(this).closest(".list").data("id"));var a=$(this);$(this).addClass("in-focus");var b=$(this).data("id");console.log("Item ID:",b);var c=$(this).closest(".list").data("id"),d=String("/list/"+c+"/items");console.log("url",d),$.ajax({url:d,type:"PUT",dataType:"json",data:{id:a.data("id"),content:a.val()},success:function(b){console.log("Edited item!",b),a.blur(),a.trigger("mouseleave"),$(window).trigger("click")}})},completeItem=function(){console.log("Complete item");var a=$(this).closest(".list").data("id");console.log(a);var b=$(this).data();console.log(b.id);var c="/list/"+a+"/items/complete";$.ajax({url:c,type:"PUT",dataType:"json",data:{id:b.id},success:function(){console.log("Completed item!"),refreshList(a)}})},trashItem=function(){console.log("Trash item");var a=$(this).closest(".list").data("id"),b=$(this).data(),c="/list/"+b+"/items/trash";$.ajax({url:c,type:"PUT",dataType:"json",data:{id:b.id},success:function(){console.log("Moved item to trash!"),refreshList(a)}})},archiveItem=function(){console.log("archive item")},refreshList=function(a){console.log("Reload list",a);var b="/list/"+a,c=$("#"+a);$.ajax({url:b,type:"GET",dataType:"json",success:function(a){var b=a[0].items;c.empty(),c.append(genItem(b))}})},genActions=function(){console.log("Generate action buttons",$(this));var a=$(this);a.removeAttr("disabled"),a.blur().focus(),a.val(a.val()),a.closest("li").hasClass("item-complete")&&(a.closest("li").removeClass("item-complete"),a.on("blur",function(){$(this).closest("li").addClass("item-complete")})),$(".item-buttons").empty();var b=$("<div />",{class:"item-buttons"}),c=$("<button />",{class:"done-button"}).html("Done");c.on("click",completeItem),c.data(a.data());var d=$("<button />",{class:"archive-button"}).html("Archive");d.on("click",archiveItem),d.data(a.data());var e=$("<button />",{class:"trash-button"}).html("Trash");e.on("click",trashItem),e.data(a.data()),b.append([c,d,e]),a.parent().append(b),a.on("mouseleave",function(){$(window).on("click",function(){a.attr("disabled","true"),b.detach()}),a.parent().on("click",function(a){a.stopPropagation()})})};console.log("98_load_lists.js sourced");var loadLists=function(){$.ajax({url:"/list",type:"GET",dataType:"json",success:function(a){console.log("genList data:",a);genList(a)}})};console.log("99_main.js sourced"),$(document).ready(function(){loadLists(),$("body").on("change",".new-item-input",addItem),$("body").on("change",".item-input",editItem),$("body").on("dblclick",".item-input",genActions),$("body").on("change",".list-title-input",editList),$(".input-new-list").on("enterKey",addList),$(".input-new-list").keyup(function(a){13==a.keyCode&&$(this).trigger("enterKey")})});